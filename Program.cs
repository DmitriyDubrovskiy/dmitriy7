using System;
using System.Collections.Generic;
using System.Linq;

class Товар
{
    public string Назва { get; set; }
    public double Ціна { get; set; }
    public string Опис { get; set; }
    public string Категорія { get; set; }
    public double Рейтинг { get; set; }

    public Товар(string назва, double ціна, string опис, string категорія, double рейтинг)
    {
        Назва = назва;
        Ціна = ціна;
        Опис = опис;
        Категорія = категорія;
        Рейтинг = рейтинг;
    }
}

class Користувач
{
    public string Логін { get; set; }
    public string Пароль { get; set; }
    public List<Замовлення> ІсторіяПокупок { get; set; }

    public Користувач(string логін, string пароль)
    {
        Логін = логін;
        Пароль = пароль;
        ІсторіяПокупок = new List<Замовлення>();
    }
}

class Замовлення
{
    public List<Товар> Товари { get; set; }
    public List<int> Кількість { get; set; }
    public double ЗагальнаВартість { get; set; }
    public string Статус { get; set; }

    public Замовлення(List<Товар> товари, List<int> кількість)
    {
        Товари = товари;
        Кількість = кількість;
        ЗагальнаВартість = ОбчислитиЗагальнуВартість();
        Статус = "Очікує на оплату";
    }

    private double ОбчислитиЗагальнуВартість()
    {
        double загальна = 0;
        for (int i = 0; i < Товари.Count; i++)
        {
            загальна += Товари[i].Ціна * Кількість[i];
        }
        return загальна;
    }
}

interface ISearchable
{
    List<Товар> ПошукЗаКритерієм(List<Товар> товари, string критерій, double мінімальнаЦіна, double максимальнаЦіна, string категорія);
}

class Магазин : ISearchable
{
    private List<Товар> товари;
    private List<Користувач> користувачі;
    private List<Замовлення> замовлення;

    public Магазин()
    {
        товари = new List<Товар>();
        користувачі = new List<Користувач>();
        замовлення = new List<Замовлення>();
    }

    public void ДодатиТовар(Товар товар)
    {
        товари.Add(товар);
    }

    public void ДодатиКористувача(Користувач користувач)
    {
        користувачі.Add(користувач);
    }

    public void ОформитиЗамовлення(Користувач користувач, List<Товар> товари, List<int> кількість)
    {
        if (користувачі.Contains(користувач) && товари.Count == кількість.Count)
        {
            Замовлення замовлення = new Замовлення(товари, кількість);
            замовлення.Статус = "Очікує на оплату";
            користувач.ІсторіяПокупок.Add(замовлення);
            замовлення.Статус = "Очікує на відправку";
            замовлення.Статус = "Доставлено";
            замовлення.Статус = "Завершено";
            замовлення.Статус = "Закрито";
            замовлення.Статус = "Оплачено";
            this.замовлення.Add(замовлення);
        }
        else
        {
            Console.WriteLine("Неможливо оформити замовлення.");
        }
    }

    public List<Товар> ПошукЗаКритерієм(List<Товар> товари, string критерій, double мінімальнаЦіна, double максимальнаЦіна, string категорія)
    {
        return товари.Where(товар =>
            товар.Назва.Contains(критерій) &&
            товар.Ціна >= мінімальнаЦіна &&
            товар.Ціна <= максимальнаЦіна &&
            товар.Категорія == категорія
        ).ToList();
    }
}